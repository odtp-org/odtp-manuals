# odtp-manuals
All manuals, instructions, documentation and information you need to work with ODTP.

## How to serve this documentation in a docker?

The easier way to deployt this documentation is by using docker. This will create a server that will host the documentation.

1. `docker build -t odtp-docs .`
2. `docker run -it --rm -p 8000:8000 odtp-docs`

This will serve the documentation in: http://0.0.0.0:8000/odtp-org/

## Development

### How to create and activate a virtual environment? 

This will create a `venv` folder and it will install `mkdocs-material` in a local environemnt.

1. `python -m venv venv`
2. `source venv/bin/activate`
3.  Run `poetry install --no-root`
4.  Run `poetry shell`

### How to serve this documentation in local? 

In order to create an HTTP server to host the documentation we can use `mkdocs serve`. This is useful when developing as it allows you to see the changes in real time. 

1. Go to the root of this repository.
2. `mkdocs serve`

This will start an HTTP server and provide you a link to the page. By default: http://0.0.0.0:8000/odtp-org/

### How to build?

Mkdocs is a tool to create a documentation as a static webpage. In order to produce this page we need to build it using the command `mkdocs build`

1. Go to the root of this repository.
2. `mkdocs build`



## ADD FROM ODTP REPO


## How to install and configure it?

You can install odtp by using [poetry](https://python-poetry.org/) and running: 

1. Download the repository. 
2. (Optional) Rename `.env.dist` as `.env` and populate it with the right credentials. This is essential if you want to use S3 and MongoDB. 
2. Run `poetry install`
3. Run `poetry shell`
4. Run `odtp --help`

This should print out the help for `odtp`

Hint: on a Mac with Apple Chip: change the default shell before you install
```bash
env /usr/bin/arch -x86_64 /bin/bash --login
```

### Configuring .env file. 

In order to connect to MongoDB and S3. You need to provide the credentials in an enviroment file with the following structure. This .env file needs to be in the folder where odtp is executed.

```
ODTP_MONGO_URL=
ODTP_S3_SERVER=
ODTP_BUCKET_NAME=
ODTP_ACCESS_KEY=
ODTP_SECRET_KEY=
```x

## Concept

The idea of odtp is to be installed as an instance in small-medium computing platform (such a servers, workstations, laptops, etc).  

The arquitecture of the odtp include different core-modules dealing with specific task. Between parenthesis you can find the technologies that are being considered for this modules.

- Dashboard (Nicegui)
- CLI
- Authentication (eduID, GH)
- Workflow manager (Barfi)
- ODTP orchestrator (ODTP original)
- License manager (Swiss Data Custodian) #core-optional
- Data governance (Swiss Data Custodian) #core-optional
- Semantic validator engine (TopBrains) #core-optional
- KG/Ontology storing (GraphDB) #core-optional
- Snapshots/Data transferring (MINION S3)
- Performance Logging (Grafana) 

All these core modules will be available in the full instance. However, for those users who wants to try a lighter version they can omit the core-optional modules having only the following configuration.

- Core Modules
    - Dashboard (Nicegui)
    - GUI (Streamlit): discontinued, but kept until Nicegui transition is complete
    - CLI
    - Authentication (eduID, GH)
    - Workflow manager (Barfi)
    - ODTP orchestrator (ODTP original)
    - Traces/Logging/Users data storing (MongoDB)
    - Snapshots/Data transferring (MINION S3)
    - Performance Logging (Grafana) 

- Core-Optional Modules
    - Semantic validator engine (TopBrains) #core-optional
    - KG/Ontology storing (GraphDB) #core-optional
    - License manager (Swiss Data Custodian) #core-optional
    - Data governance (Swiss Data Custodian) #core-optional

Finally the ODTP will be complemented with a components zoo that will include extensions of 3 types:

- X number of dataloaders.
- Y number of analytical components.
- Z number of visualization components.

## Technologies involved

- Nicegui (UI)
- Barfi (Workflow manager)
- MongoDB (Document Database)
- S3 (Storage Sytem)
- Docker (Container Technology)

## Terminology

- ODTP: A tool designed to manage, run, and design digital twins. It offers an interface (CLI, and GUI) for running and managing digital twins. It wraps different open source technologies to provide a high level API for the final user. 
- Components (ODTP Term): Extensions generated by us or the community that perform specific tasks in the digital twin. The input/output is validated semantically, and they run within a docker container as an independent micro-service. They can be one of the following categories:
	- Dataloader component. 
	- Analytical component.
	- Visualization component.
- Core/core-optional modules (ODTP Term): These modules are the different parts that we are developing for the ODTP. These core modules include the different classes/methods needed to run the tool and wrap the services used. Some of these modules are not mandatory in order to run ODTP with the minimal features (i.e. running manually odtp components).
- Services: One service or micro-service, in a micro-services architecture refers to one logical unit that performs one specific task in an independent manner. In ODTP we use different servers to support core modules, such as MongoDB for the database, Minion for the storage, or GraphDB for the knowledge graph storing. But also, from a technical standpoint every component is turned into a micro-service when running. I think this is the part thatâ€™s bringing more confusion. 

